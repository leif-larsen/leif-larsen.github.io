{{ define "main" }}
<section class="section-hero">
  <div class="container">
    <h1 class="section-title">{{ .Title }}</h1>
    {{ with .Description }}
      <p class="section-subtitle">{{ . }}</p>
    {{ end }}
  </div>
</section>

<section class="latest-posts">
  <div class="container post-grid">
    {{ $paginator := .Paginate (.Pages.ByDate.Reverse) }}
    {{ range $paginator.Pages }}
      {{ partial "post-card.html" (dict "page" .) }}
    {{ end }}
  </div>
  {{ if gt $paginator.TotalPages 1 }}
    <nav class="pagination" aria-label="Pagination">
      {{ with $paginator.Prev }}
        <a class="page-btn" href="{{ .URL }}" aria-label="Previous page">&lsaquo;</a>
      {{ end }}
      {{ $current := $paginator.PageNumber }}
      {{ $min := sub $current 1 }}
      {{ $max := add $current 1 }}
      {{ range $paginator.Pagers }}
        {{ if and (ge .PageNumber $min) (le .PageNumber $max) }}
          <a class="page-btn {{ if eq . $paginator }}is-active{{ end }}" href="{{ .URL }}">{{ .PageNumber }}</a>
        {{ end }}
      {{ end }}
      {{ with $paginator.Next }}
        <a class="page-btn" href="{{ .URL }}" aria-label="Next page">&rsaquo;</a>
      {{ end }}
    </nav>
  {{ end }}
</section>
{{ end }}
